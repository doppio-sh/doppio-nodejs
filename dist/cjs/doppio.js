"use strict";function __classPrivateFieldGet(t,e,o,r){if("a"===o&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?r:"a"===o?r.call(t):r?r.value:e.get(t)}function __classPrivateFieldSet(t,e,o,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(t,o):s?s.value=o:e.set(t,o),o}var t,e,o;"function"==typeof SuppressedError&&SuppressedError;t=new WeakMap,e=new WeakMap,o=new WeakMap;class DoppioError extends Error{constructor(t){super(t),this.name="DoppioError"}}exports.Doppio=class Doppio{constructor(r){if(t.set(this,void 0),e.set(this,void 0),o.set(this,void 0),!r)throw new DoppioError("You must set your Doppio.sh API key");__classPrivateFieldSet(this,t,r,"f"),__classPrivateFieldSet(this,e,null,"f"),__classPrivateFieldSet(this,o,null,"f")}mergedConfigs(){const t={};return __classPrivateFieldGet(this,e,"f")&&(t.doppio={...__classPrivateFieldGet(this,e,"f")}),__classPrivateFieldGet(this,o,"f")&&(t.launch={...__classPrivateFieldGet(this,o,"f")}),t}doppio(t){__classPrivateFieldSet(this,e,t,"f")}launch(t){__classPrivateFieldSet(this,o,t,"f")}async renderPdfDirect(e){if(!e)throw new DoppioError("PagePdfConfigObject must be defined.");if(e.setContent&&e.goto)throw new DoppioError("You cannot use setContent and goto at the same time.");if(!e.setContent&&!e.goto)throw new DoppioError("You need to set setContent or goto");const o=await fetch("https://api.doppio.sh/v1/render/pdf/direct",{method:"POST",headers:{Authorization:`Bearer ${__classPrivateFieldGet(this,t,"f")}`,"User-Agent":"Doppio/0.0.1","Content-Type":"application/json"},body:JSON.stringify({...this.mergedConfigs(),page:e})});if(400===o.status){const t=await o.json();throw new DoppioError(`${t.message}`)}if(!o.ok)throw new DoppioError(`HTTP error! status: ${o.status}`);return await o.arrayBuffer()}async renderScreenshotDirect(e){if(!e)throw new DoppioError("PageScreenshotConfigObject must be defined.");if(e.setContent&&e.goto)throw new DoppioError("You cannot use setContent and goto at the same time.");if(!e.setContent&&!e.goto)throw new DoppioError("You need to set setContent or goto");const o=await fetch("https://api.doppio.sh/v1/render/screenshot/direct",{method:"POST",headers:{Authorization:`Bearer ${__classPrivateFieldGet(this,t,"f")}`,"User-Agent":"Doppio/0.0.1","Content-Type":"application/json"},body:JSON.stringify({...this.mergedConfigs(),page:e})});if(400===o.status){const t=await o.json();throw new DoppioError(`${t.message}`)}if(!o.ok)throw new DoppioError(`HTTP error! status: ${o.status}`);return await o.arrayBuffer()}async renderPdfSync(e){if(!e)throw new DoppioError("PagePdfConfigObject must be defined.");if(e.setContent&&e.goto)throw new DoppioError("You cannot use setContent and goto at the same time.");if(!e.setContent&&!e.goto)throw new DoppioError("You need to set setContent or goto");const o=await fetch("https://api.doppio.sh/v1/render/pdf/sync",{method:"POST",headers:{Authorization:`Bearer ${__classPrivateFieldGet(this,t,"f")}`,"User-Agent":"Doppio/0.0.1","Content-Type":"application/json"},body:JSON.stringify({...this.mergedConfigs(),page:e})});if(400===o.status){const t=await o.json();throw new DoppioError(`${t.message}`)}if(!o.ok)throw new DoppioError(`HTTP error! status: ${o.status}`);return await o.json()}async renderScreenshotSync(e){if(!e)throw new DoppioError("PageScreenshotConfigObject must be defined.");if(e.setContent&&e.goto)throw new DoppioError("You cannot use setContent and goto at the same time.");if(!e.setContent&&!e.goto)throw new DoppioError("You need to set setContent or goto");const o=await fetch("https://api.doppio.sh/v1/render/screenshot/sync",{method:"POST",headers:{Authorization:`Bearer ${__classPrivateFieldGet(this,t,"f")}`,"User-Agent":"Doppio/0.0.1","Content-Type":"application/json"},body:JSON.stringify({...this.mergedConfigs(),page:e})});if(400===o.status){const t=await o.json();throw new DoppioError(`${t.message}`)}if(!o.ok)throw new DoppioError(`HTTP error! status: ${o.status}`);return await o.json()}async renderPdfAsync(o){if(!o)throw new DoppioError("PagePdfConfigObject must be defined.");if(o.setContent&&o.goto)throw new DoppioError("You cannot use setContent and goto at the same time.");if(!o.setContent&&!o.goto)throw new DoppioError("You need to set setContent or goto");if(!__classPrivateFieldGet(this,e,"f").webhook)throw new DoppioError("You need to set a webhook property to work with the async render method");const r=await fetch("https://api.doppio.sh/v1/render/pdf/async",{method:"POST",headers:{Authorization:`Bearer ${__classPrivateFieldGet(this,t,"f")}`,"User-Agent":"Doppio/0.0.1","Content-Type":"application/json"},body:JSON.stringify({...this.mergedConfigs(),page:o})});if(400===r.status){const t=await r.json();throw new DoppioError(`${t.message}`)}if(!r.ok)throw new DoppioError(`HTTP error! status: ${r.status}`);return await r.json()}async renderScreenshotAsync(o){if(!o)throw new DoppioError("PageScreenshotConfigObject must be defined.");if(o.setContent&&o.goto)throw new DoppioError("You cannot use setContent and goto at the same time.");if(!o.setContent&&!o.goto)throw new DoppioError("You need to set setContent or goto");if(!__classPrivateFieldGet(this,e,"f").webhook)throw new DoppioError("You need to set a webhook property to work with the async render method");const r=await fetch("https://api.doppio.sh/v1/render/screenshot/async",{method:"POST",headers:{Authorization:`Bearer ${__classPrivateFieldGet(this,t,"f")}`,"User-Agent":"Doppio/0.0.1","Content-Type":"application/json"},body:JSON.stringify({...this.mergedConfigs(),page:o})});if(400===r.status){const t=await r.json();throw new DoppioError(`${t.message}`)}if(!r.ok)throw new DoppioError(`HTTP error! status: ${r.status}`);return await r.json()}async renderTemplateDirect(e){const o=await fetch("https://api.doppio.sh/v1/template/direct",{method:"POST",headers:{Authorization:`Bearer ${__classPrivateFieldGet(this,t,"f")}`,"User-Agent":"Doppio/0.0.1","Content-Type":"application/json"},body:JSON.stringify({...this.mergedConfigs(),...e})});if(400===o.status){const t=await o.json();throw new DoppioError(`${t.message}`)}if(!o.ok)throw new DoppioError(`HTTP error! status: ${o.status}`);return await o.arrayBuffer()}async renderTemplateSync(e){const o=await fetch("https://api.doppio.sh/v1/template/sync",{method:"POST",headers:{Authorization:`Bearer ${__classPrivateFieldGet(this,t,"f")}`,"User-Agent":"Doppio/0.0.1","Content-Type":"application/json"},body:JSON.stringify({...this.mergedConfigs(),...e})});if(400===o.status){const t=await o.json();throw new DoppioError(`${t.message}`)}if(!o.ok)throw new DoppioError(`HTTP error! status: ${o.status}`);return await o.json()}async renderTemplateAsync(e){const o=await fetch("https://api.doppio.sh/v1/template/async",{method:"POST",headers:{Authorization:`Bearer ${__classPrivateFieldGet(this,t,"f")}`,"User-Agent":"Doppio/0.0.1","Content-Type":"application/json"},body:JSON.stringify({...this.mergedConfigs(),...e})});if(400===o.status){const t=await o.json();throw new DoppioError(`${t.message}`)}if(!o.ok)throw new DoppioError(`HTTP error! status: ${o.status}`);return await o.json()}},exports.DoppioError=DoppioError;
